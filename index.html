<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Valentine üíò</title>

<style>
body {
  margin: 0;
  min-height: 100vh;
  background: #fff7f9;
  font-family: "Segoe UI", sans-serif;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  overflow: hidden;
}

/* -------- INITIAL VIEW -------- */
#initial {
  display: flex;
  flex-direction: column;
  align-items: center;
}

img.initial-gif {
  width: min(200px, 50vw);
  margin-bottom: 20px;
}

h1 {
  font-size: clamp(1.6rem, 5vw, 2.4rem);
  margin-bottom: 30px;
}

.button-grid {
  display: flex;
  flex-direction: column;
  gap: 20px;
  width: 100%;
  max-width: 400px;
  align-items: center;
}

.row {
  display: flex;
  gap: 20px;
  width: 100%;
  justify-content: center;
}

button {
  width: 140px;
  height: 60px;
  border: none;
  border-radius: 14px;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.4s ease, opacity 0.3s ease;
}

.single {
  width: 160px;
}

/* YES spin */
.yes-spin {
  animation: spinOnce 0.6s ease;
}

@keyframes spinOnce {
  from { transform: rotate(0deg) scale(var(--scale,1)); }
  to { transform: rotate(360deg) scale(var(--scale,1)); }
}

/* No shrink */
.shrink-away {
  animation: shrinkFade 3s forwards ease-in-out;
}

@keyframes shrinkFade {
  to {
    transform: scale(0);
    opacity: 0;
  }
}

/* -------- END VIEW -------- */
#end {
  display: none;
  position: relative;
  width: 100vw;
  height: 100vh;
}

/* Floating animation */
@keyframes floaty {
  0%,100% { transform: translateY(0px); }
  50% { transform: translateY(-12px); }
}

.corner-gif {
  position: absolute;
  width: min(160px, 30vw);
  animation: floaty 3s ease-in-out infinite;
}

.top-left { top: 18%; left: 15%; }
.top-right { top: 18%; right: 15%; }
.bottom-left { bottom: 18%; left: 15%; }
.bottom-right { bottom: 18%; right: 15%; }

/* Center Text */
.center-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: clamp(1.6rem, 5vw, 2.4rem);
  font-weight: 800;
  line-height: 1.3;
  animation: spinText 2s ease-in-out;
}

@keyframes spinText {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to { transform: translate(-50%, -50%) rotate(720deg); }
}

.heart {
  display: inline-block;
  animation: pulse 1.2s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

/* Confetti */
.confetti {
  position: fixed;
  width: 8px;
  height: 8px;
  background: red;
  top: -10px;
  animation: confettiFall 3s linear forwards;
}

@keyframes confettiFall {
  to {
    transform: translateY(110vh) rotate(720deg);
    opacity: 0;
  }
}

/* FLOATING HEART PARTICLES */
.heart-particle {
  position: fixed;
  color: #ff4d6d;
  font-size: 20px;
  animation: floatHeart 6s linear forwards;
  pointer-events: none;
}

@keyframes floatHeart {
  from { transform: translateY(100vh); opacity: 1; }
  to { transform: translateY(-10vh); opacity: 0; }
}

/* SCREEN SPARKLE EFFECT */
.sparkle {
  position: fixed;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  animation: sparkleFade 2s linear forwards;
  pointer-events: none;
}

@keyframes sparkleFade {
  to { opacity: 0; transform: scale(3); }
}

/* -------- NO POPUP -------- */
#noPopup {
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.95);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

#noPopup img {
  width: min(80vw, 400px);
}

/* -------- YES CRYING -------- */
.crying::after {
  content: "üíßüíß";
  position: absolute;
  font-size: 1.2rem;
  animation: tears 1s infinite;
}

@keyframes tears {
  0% { transform: translateY(0); opacity: 1; }
  100% { transform: translateY(20px); opacity: 0; }
}
</style>
</head>

<body>

<div id="initial">
  <img src="rabbitInitial.gif" class="initial-gif" />
  <h1>Will you be my Valentine?</h1>

  <div class="button-grid">
    <div class="row">
      <button id="yesBtn">A. Yes</button>
      <button id="btnB">B. A</button>
    </div>

    <div class="row">
      <button id="btnC">C. B</button>
      <button id="btnD">D. C</button>
    </div>

    <button class="single" id="noBtn">E. No</button>
  </div>
</div>

<div id="end">
  <img src="rabbitEnd1.gif" class="corner-gif top-left" />
  <img src="rabbitEnd2.gif" class="corner-gif top-right" />
  <img src="rabbitEnd3.gif" class="corner-gif bottom-left" />
  <img src="rabbitEnd4.gif" class="corner-gif bottom-right" />

  <div class="center-text">
    YAYYYYY!<br>
    I know it!<br>
    I love youuu!!<br>
    <span class="heart">‚ù§Ô∏è</span>
  </div>
</div>

<div id="noPopup">
  <img src="rabbitNo.gif">
</div>

<script>
const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");
const btnB = document.getElementById("btnB");
const btnC = document.getElementById("btnC");
const btnD = document.getElementById("btnD");
const initial = document.getElementById("initial");
const end = document.getElementById("end");
const noPopup = document.getElementById("noPopup");

/* YES Growth */
let yesScale = 1;
function growYes() {
  yesScale += 0.15;
  yesBtn.style.transform = `scale(${yesScale}) rotate(360deg)`;
  setTimeout(() => {
    yesBtn.style.transform = `scale(${yesScale})`;
  }, 400);
}
btnB.addEventListener("click", growYes);
btnC.addEventListener("click", growYes);
btnD.addEventListener("click", growYes);

/* NO button stages */
const noTexts = [
  "Are you sureee?",
  "Really sureee?",
  "Pretty pleaseee",
  "Last chanceee üò≠"
];
let noClicks = 0;
let shrinkTimer = null;

function startShrinkTimer() {
  if (shrinkTimer) clearTimeout(shrinkTimer);

  shrinkTimer = setTimeout(() => {
    noBtn.classList.add("shrink-away");
    noBtn.style.pointerEvents = "none";
  }, 5000);
}

noBtn.addEventListener("click", () => {
  if (noClicks === 0) yesBtn.classList.add("crying");

  noPopup.style.display = "flex";
  setTimeout(() => noPopup.style.display = "none", 2000);

  if (noClicks < noTexts.length) {
    noBtn.textContent = noTexts[noClicks];
    noClicks++;
    startShrinkTimer(); // üî• restart shrink timer on each stage
  }
});

/* Initial shrink timer */
startShrinkTimer();

/* Confetti */
function launchConfetti() {
  for (let i = 0; i < 40; i++) {
    const confetti = document.createElement("div");
    confetti.classList.add("confetti");
    confetti.style.left = Math.random() * 100 + "vw";
    confetti.style.background = `hsl(${Math.random()*360},70%,60%)`;
    confetti.style.animationDuration = 2 + Math.random() * 2 + "s";
    document.body.appendChild(confetti);
    setTimeout(() => confetti.remove(), 4000);
  }
}

yesBtn.addEventListener("click", () => {
  initial.style.display = "none";
  end.style.display = "block";
  launchConfetti();
});

/* Hearts */
setInterval(() => {
  let heart = document.createElement("div");
  heart.className = "heart-particle";
  heart.innerHTML = "üíñ";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = (15 + Math.random() * 20) + "px";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 6000);
}, 800);

/* Sparkles */
setInterval(() => {
  let sparkle = document.createElement("div");
  sparkle.className = "sparkle";
  sparkle.style.left = Math.random() * 100 + "vw";
  sparkle.style.top = Math.random() * 100 + "vh";
  document.body.appendChild(sparkle);
  setTimeout(() => sparkle.remove(), 2000);
}, 300);
</script>

</body>
</html>
